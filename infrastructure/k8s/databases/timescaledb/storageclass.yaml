---
# Premium SSD Storage Class for TimescaleDB Data
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: timescaledb-premium-ssd
  labels:
    app.kubernetes.io/name: timescaledb
    app.kubernetes.io/component: storage
provisioner: kubernetes.io/azure-disk  # Change based on cloud provider
parameters:
  storageaccounttype: Premium_LRS
  kind: Managed
  cachingmode: ReadWrite
reclaimPolicy: Retain
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
mountOptions:
  - barrier=1
  - noatime
  - nodiratime

---
# High-Performance Storage Class for WAL
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: timescaledb-wal-ssd
  labels:
    app.kubernetes.io/name: timescaledb
    app.kubernetes.io/component: storage
provisioner: kubernetes.io/azure-disk  # Change based on cloud provider
parameters:
  storageaccounttype: Premium_LRS
  kind: Managed
  cachingmode: None  # Direct writes for WAL
reclaimPolicy: Retain
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
mountOptions:
  - barrier=1
  - noatime
  - sync

---
# Backup Storage Class
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: timescaledb-backup
  labels:
    app.kubernetes.io/name: timescaledb
    app.kubernetes.io/component: storage
provisioner: kubernetes.io/azure-disk  # Change based on cloud provider
parameters:
  storageaccounttype: StandardSSD_LRS  # Cheaper for backups
  kind: Managed
reclaimPolicy: Retain
allowVolumeExpansion: true
volumeBindingMode: WaitForFirstConsumer
